<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<title>emplist</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	
	  <script>
        $(document).ready(function() {
            // 监听全选复选框的状态变化
            $("#selectAll").change(function() {
                // 获取全选复选框的状态
                var isChecked = $(this).prop("checked");
                
                // 将全选状态应用到其他复选框
                $(".checkbox").prop("checked", isChecked);
            });
        });
    </script>
    
	<script>
		function addRec() {
				location.href = '[[@{/manageSnacksAdd}]]';
			}
			function updateRec(key) {

				location.href = '[[@{/snacks/updateInit?id=}]]' + key;
			}
			function delRec(key) {
				if (window.confirm('确定要删除这条记录吗?')) {
					location.href = '[[@{/snacks/deleteOne?id=}]]' + key;
				}

			}
			function delAllRec() {
				
				if (window.confirm('确定要删除全部所选记录吗?')) {
					
					$('#formLst').attr('action', "deleteAll");
					$('#formLst').submit();
				}

			}
			
		
	</script>
	</head>
	<body>
		<div id="wrap">
			<div id="top_content"> 
				<div id="header">
					<div id="rightheader">
						<p>
							2009/11/20 
							<br />
							<a th:href="@{/menu}">返回菜单</a>
							<a th:if="${session.user!=null}" th:href="@{/user/logout}">安全退出</a>
							<a th:if="${session.user==null}" th:href="@{/login}">点我登录</a>
						</p>
					</div>
					<div id="topheader">
						<h1 id="title">
							<a href="#">main</a>
						</h1>
					</div>
					<div id="navigation">
					</div>
				</div>
				<div id="content">
					<p id="whereami">
					</p>
					<h1>
						欢迎 <span th:if="${session.user!=null}" th:text="${session.user.username}"></span>
							<span th:if="${session.user==null}" >游客</span>!
							
					</h1>
<form th:action="@{/snacks/searchByCondition}" method="post">					
<table>
	<tr><td>商品名称</td><td><input type="text" name="snacks.name" th:value="${vo.snacks.name}"></td></tr>
						<tr>
							<td>类型</td>
							<td>
							 	<select name="type">
									 <option value=""></option>
									 <option value="1" th:selected="(${type} == '1')" >各种肉类</option>
									 <option value="2" th:selected="(${type} == '2')">鸡蛋</option>
									 <option value="3" th:selected="(${type} == '3')">蔬菜</option>
								 </select>
							</td>
						</tr>

    <tr><td>单价</td><td><input type="text" name="snacks.salary" th:value="${vo.snacks.salary}"> 
							</td></tr>
<tr>
	<td>生产日期</td>
							<td><input type="date" name="snacks.pof" th:value="${vo.snacks.pof}">
							 </td>
							 </tr>
</table>

<div align="right">
<input type="button" value="一括删除" onclick="delAllRec()">  
 <input type="button" value="追加" onclick="addRec()"> 
  <input type="submit" value="検索" >
</div>
</form>

<form id="formLst" method="post">
				<table class="table">
					<tr class="table_header">
						<td>
							<input type="checkbox" id="selectAll"> 全选
						</td>

						<td>
							编号
						</td>
						<td>
							商品名称
						</td>
						<td>
							价格
						</td>
						<td>
							赏味期限
						</td>
						<td>
							商品图片
						</td>
						<td>
							操作
						</td>
					</tr>
					<tr th:each="obj,state:${vo.lst}" th:class="${state.odd?'row1':'row2'}">
						<td>
								<input type="checkbox" th:value="${obj.id}" th:name="|lst[${state.index}].id|" class="checkbox"/>
						</td>

						<td>
							<span th:text="${obj.id}"></span>
						</td>
						<td>
							<span th:text="${obj.name}"></span>
						</td>
						<td>
							<span th:text="${obj.salary}"></span>
						</td>
						<td>
							<span th:text="${obj.pof}"></span>
						</td>
						<td>
					
							<img th:src="@{/}+${obj.photo}" width="60">
						</td>
						<td>
							<input type="button" value="更新" th:onclick="'updateRec('+${obj.id}+')'">

							<input type="button" value="删除" th:onclick="'delRec('+${obj.id}+')'">
						</td>
					</tr>

				</table>


					  xxxxxxxxxxxx SNACKS

				</div>
			</div>
			<div id="footer">
				<div id="footer_bg">
				ABC@126.com
				</div>
			</div>
		</div>
	</body>
</html>